# PBL 前端结构 - 现状 vs 优化方案对比

## 一、学生端菜单结构对比

### ❌ 当前结构（存在问题）

```
┌─────────────────────────────────────────┐
│          跨学科项目式学习平台           │
├─────────────────────────────────────────┤
│  🏠 学习首页                            │
│  📁 项目列表        ← 问题：缺少课程入口 │
│  📋 任务列表        ← 问题：层级不清    │
│  📊 学习进度                            │
│  👤 个人信息                            │
└─────────────────────────────────────────┘

用户困惑：
- 我的课程在哪里？
- 项目和任务是什么关系？
- 如何开始学习？
```

### ✅ 优化后结构（层级清晰）

```
┌─────────────────────────────────────────┐
│          跨学科项目式学习平台           │
├─────────────────────────────────────────┤
│  🏠 学习首页                            │
│  📚 我的课程        ← 新增：顶层入口    │
│  🎯 我的项目        ← 优化：关联课程    │
│  📊 学习进度                            │
│  👤 个人信息                            │
└─────────────────────────────────────────┘

用户体验：
✓ 从"我的课程"开始学习
✓ 层级关系清晰明了
✓ 学习路径一目了然
```

---

## 二、学习流程对比

### ❌ 当前流程（路径混乱）

```
学习首页
    ↓ (用户不知道去哪)
  ??? 
    ↓
项目列表 / 任务列表  ← 平级展示，关系不明
    ↓
单元学习  ← 缺少上下文
```

### ✅ 优化后流程（路径清晰）

```
🏠 学习首页
    ├── 展示我的课程卡片
    ├── 展示进行中的项目
    └── 展示待完成任务
    
    ↓ 点击课程
    
📚 我的课程列表
    ├── 智能家居AI助手项目 (进行中 65%)
    ├── 生态花园设计 (未开始)
    └── ...
    
    ↓ 点击课程
    
📖 课程详情页
    ├── 课程介绍
    ├── 学习单元列表
    │   ├── ✅ 第一单元：智能体基础 (已完成)
    │   ├── 🔓 第二单元：硬件设备接入 (进行中)
    │   ├── 🔒 第三单元：智能体框架 (锁定)
    │   └── ...
    └── 课程项目
        └── 智能家居中控系统开发
    
    ↓ 点击单元
    
📝 单元学习页 (全屏模式)
    ├── 左侧：学习步骤
    │   ├── 📹 视频：Agent 101
    │   ├── 📄 文档：RTF 提示词框架
    │   ├── ✏️ 任务：Hello World
    │   └── ...
    ├── 中间：内容展示
    └── 右侧：AI 助手
```

---

## 三、管理端菜单结构对比

### ❌ 当前结构（层级扁平）

```
┌─────────────────────────────────────────┐
│            PBL管理后台                  │
├─────────────────────────────────────────┤
│  📊 概览                                │
│  📄 课程管理                            │
│  📁 学习单元        ← 问题：应属于课程  │
│  📤 资料管理        ← 问题：应属于单元  │
└─────────────────────────────────────────┘
                ↓
        缺少：任务管理、项目管理
```

### ✅ 优化后结构（层级分明）

```
┌─────────────────────────────────────────┐
│            PBL管理后台                  │
├─────────────────────────────────────────┤
│  📊 概览                                │
│  📚 课程管理                            │
│      ├── 课程列表                       │
│      └── 点击课程 → 课程详情            │
│          ├── 基本信息                   │
│          ├── 学习单元管理 (可排序)      │
│          │   └── 点击单元 → 单元详情   │
│          │       ├── 学习资料          │
│          │       └── 任务列表          │
│          └── 课程项目管理               │
│                                          │
│  📦 资源库                              │
│  🎯 项目管理                            │
│  👥 用户管理                            │
└─────────────────────────────────────────┘
```

---

## 四、数据关系与页面映射

### 数据库层级

```
pbl_courses (课程)
    ├── id: 1, title: "智能家居AI助手"
    │
    ├─→ pbl_units (单元) 1:N
    │       ├── id: 101, title: "第一单元：智能体基础"
    │       │   ├─→ pbl_resources (资料) 1:N
    │       │   │       ├── 视频：Agent 101
    │       │   │       ├── 文档：RTF 框架
    │       │   │       └── ...
    │       │   └─→ pbl_tasks (任务) 1:N
    │       │           ├── 任务1.1：Hello World
    │       │           ├── 任务1.2：注入灵魂
    │       │           └── ...
    │       ├── id: 102, title: "第二单元：硬件设备接入"
    │       └── ...
    │
    └─→ pbl_projects (项目) 1:N
            └── id: 201, title: "智能家居中控系统"
```

### 学生端页面映射

```
Dashboard (/)
    └── 展示：课程卡片、项目卡片、任务提醒

MyCourses (/courses)
    └── 展示：pbl_courses (我的课程列表)

CourseDetail (/course/:courseId)
    ├── 展示：pbl_courses (课程信息)
    ├── 展示：pbl_units (单元列表)
    └── 展示：pbl_projects (课程项目)

UnitLearning (/unit/:unitId)
    ├── 展示：pbl_units (单元信息)
    ├── 展示：pbl_resources (学习资料)
    └── 展示：pbl_tasks (任务列表)

ProjectDetail (/project/:projectId)
    └── 展示：pbl_projects (项目详情)
```

### 管理端页面映射

```
AdminCourses (/admin/courses)
    └── 管理：pbl_courses (CRUD)

AdminCourseDetail (/admin/course/:courseId)
    ├── 管理：pbl_courses (课程信息)
    ├── 管理：pbl_units (单元列表 + 排序)
    └── 管理：pbl_projects (项目列表)

AdminUnitDetail (/admin/unit/:unitId)
    ├── 管理：pbl_units (单元信息)
    ├── 管理：pbl_resources (资料列表)
    └── 管理：pbl_tasks (任务列表)

AdminResources (/admin/resources)
    └── 管理：pbl_resources (资源库)

AdminProjects (/admin/projects)
    └── 管理：pbl_projects (项目管理)
```

---

## 五、API 调用流程示例

### 学生访问课程的 API 调用链

```
1. 访问"我的课程"页面
   GET /api/student/courses
   返回：课程列表
   
2. 点击"智能家居AI助手"课程
   GET /api/student/courses/1
   返回：课程详情 + 单元列表
   
3. 点击"第一单元"
   GET /api/student/units/101
   返回：单元详情 + 资料列表 + 任务列表
   
4. 观看视频资料
   GET /api/student/resources/1001
   返回：视频 URL、封面等
   
5. 提交任务
   POST /api/student/tasks/2001/submit
   请求：{ content: "作业内容..." }
   返回：提交结果
```

### 管理员创建课程的 API 调用链

```
1. 创建课程
   POST /api/admin/courses
   请求：{ title: "智能家居AI助手", ... }
   返回：{ id: 1, ... }
   
2. 为课程添加单元
   POST /api/admin/courses/1/units
   请求：{ title: "第一单元：智能体基础", order: 1, ... }
   返回：{ id: 101, ... }
   
3. 为单元添加资料
   POST /api/admin/units/101/resources
   请求：{ type: "video", title: "Agent 101", ... }
   返回：{ id: 1001, ... }
   
4. 为单元添加任务
   POST /api/admin/units/101/tasks
   请求：{ title: "Hello World", ... }
   返回：{ id: 2001, ... }
   
5. 为课程创建项目
   POST /api/admin/courses/1/projects
   请求：{ title: "智能家居中控系统", ... }
   返回：{ id: 201, ... }
```

---

## 六、面包屑导航示例

### 学生端面包屑

```
首页
首页 > 我的课程
首页 > 我的课程 > 智能家居AI助手
首页 > 我的课程 > 智能家居AI助手 > 第一单元：智能体基础
首页 > 我的项目
首页 > 我的项目 > 智能家居中控系统
```

### 管理端面包屑

```
概览
概览 > 课程管理
概览 > 课程管理 > 智能家居AI助手
概览 > 课程管理 > 智能家居AI助手 > 学习单元管理
概览 > 课程管理 > 智能家居AI助手 > 第一单元 > 资料管理
概览 > 课程管理 > 智能家居AI助手 > 第一单元 > 任务管理
```

---

## 七、实施清单

### 学生端改造清单

#### Phase 1: 基础结构 (1-2天)
- [ ] 创建 `MyCourses.vue` - 我的课程列表页
- [ ] 创建 `CourseDetail.vue` - 课程详情页
- [ ] 修改 `Layout.vue` - 添加"我的课程"菜单
- [ ] 修改 `router/index.js` - 添加课程相关路由

#### Phase 2: 优化现有页面 (1-2天)
- [ ] 修改 `Dashboard.vue` - 重构为课程卡片式展示
- [ ] 修改 `UnitLearning.vue` - 优化面包屑导航
- [ ] 修改 `Projects.vue` - 添加课程关联展示
- [ ] 修改 `Tasks.vue` - 添加单元关联展示

#### Phase 3: API 对接 (2-3天)
- [ ] 创建 `api/course.js` - 课程相关 API
- [ ] 对接课程列表接口
- [ ] 对接课程详情接口
- [ ] 对接单元列表接口
- [ ] 测试数据流转

### 管理端改造清单

#### Phase 1: 菜单重组 (1天)
- [ ] 修改 `AdminDashboard.vue` - 重构菜单结构
- [ ] 添加项目管理、用户管理菜单
- [ ] 优化 UI 样式

#### Phase 2: 创建详情管理页 (3-4天)
- [ ] 创建 `AdminCourseDetail.vue` - 课程详情管理
  - [ ] Tab 1: 基本信息
  - [ ] Tab 2: 单元管理（支持排序）
  - [ ] Tab 3: 项目管理
- [ ] 创建 `AdminUnitDetail.vue` - 单元详情管理
  - [ ] Tab 1: 基本信息
  - [ ] Tab 2: 资料管理
  - [ ] Tab 3: 任务管理
- [ ] 创建 `AdminProjects.vue` - 项目管理页
- [ ] 创建 `AdminUsers.vue` - 用户管理页

#### Phase 3: 功能完善 (2-3天)
- [ ] 实现拖拽排序功能
- [ ] 实现批量操作功能
- [ ] 添加搜索和筛选
- [ ] 添加数据统计图表

---

## 八、关键改进点总结

### 🎯 核心价值

1. **符合用户心智模型**
   - 课程 → 单元 → 学习资料/任务
   - 自然的学习流程

2. **技术架构一致**
   - 前端结构 = 数据库结构
   - 减少理解成本

3. **可扩展性强**
   - 易于添加新功能
   - 便于维护和迭代

4. **用户体验优化**
   - 清晰的导航路径
   - 直观的层级关系
   - 流畅的学习体验

### 📊 预期效果

**学生端：**
- ✅ 学习路径清晰，知道从哪里开始
- ✅ 课程进度可视化
- ✅ 学习体验流畅

**管理端：**
- ✅ 内容管理结构化
- ✅ 操作逻辑符合直觉
- ✅ 提高内容创建效率

**开发端：**
- ✅ 代码结构清晰
- ✅ 便于维护和扩展
- ✅ API 设计规范
