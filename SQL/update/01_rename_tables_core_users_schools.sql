-- ========================================
-- 数据库表重命名脚本
-- ========================================
-- 说明：
-- 1. 将 aiot_core_users 重命名为 core_users
-- 2. 将 aiot_schools 重命名为 core_schools
-- 3. 兼容 MySQL 5.7-8.0 版本
-- 
-- 执行前注意事项：
-- ✓ 请先备份数据库！
-- ✓ 建议在业务低峰期执行
-- ✓ 执行后需要重启后端服务
-- 
-- 创建时间：2025-12-09
-- ========================================

-- 设置字符集
SET NAMES utf8mb4;
SET FOREIGN_KEY_CHECKS = 0;

-- ========================================
-- 1. 重命名用户表
-- ========================================
RENAME TABLE `aiot_core_users` TO `core_users`;

-- ========================================
-- 2. 重命名学校表
-- ========================================
RENAME TABLE `aiot_schools` TO `core_schools`;

-- ========================================
-- 3. 验证表重命名结果
-- ========================================
-- 执行以下查询验证表是否重命名成功：
-- 
-- SHOW TABLES LIKE 'core_%';
-- 
-- 应该看到：
-- - core_users
-- - core_schools
-- 
-- 执行以下查询确认旧表已不存在：
-- 
-- SHOW TABLES LIKE 'aiot_core_users';
-- SHOW TABLES LIKE 'aiot_schools';
-- 
-- 应该返回空结果

SET FOREIGN_KEY_CHECKS = 1;

-- ========================================
-- 执行后操作：
-- ========================================
-- 1. 重启后端服务
-- 2. 测试用户登录功能
-- 3. 测试学校管理功能
-- 4. 检查应用日志确认无错误
-- ========================================
