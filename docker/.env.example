# ==========================================
# CodeHubot PBL 系统环境配置示例
# 复制此文件为 .env 并修改相应配置
# ==========================================

# ==================== 前端配置 ====================
# 前端访问端口（宿主机端口映射）
FRONTEND_PORT=8082

# ==================== 应用运行配置 ====================
# 应用运行环境（development/production）
APP_ENV=production

# 是否开启调试模式（生产环境务必设置为 false）
DEBUG=false

# ==================== JWT 认证配置 ====================
# JWT 密钥（请务必修改为随机字符串）
# 生成方法: python -c "import secrets; print(secrets.token_urlsafe(32))"
# 或: openssl rand -hex 32
SECRET_KEY=change-me-to-random-string-in-production

# JWT 算法
ALGORITHM=HS256

# Access Token 过期时间（分钟）
ACCESS_TOKEN_EXPIRE_MINUTES=15

# Refresh Token 过期时间（分钟，默认 7 天）
REFRESH_TOKEN_EXPIRE_MINUTES=10080

# Refresh Token 密钥（可选，不设置则使用 SECRET_KEY）
# REFRESH_TOKEN_SECRET_KEY=another-random-string-for-refresh-token

# ==================== 数据库配置 ====================
# 连接到 CodeHubot 的共享 MySQL 实例
# 应用会自动从以下配置项构建数据库连接字符串
MYSQL_HOST=codehubot-mysql
MYSQL_PORT=3306
MYSQL_DATABASE=aiot_pbl
MYSQL_USER=aiot_user
MYSQL_PASSWORD=aiot_password

# 数据库连接池配置（可选）
# DB_POOL_SIZE=10
# DB_MAX_OVERFLOW=20
# DB_POOL_TIMEOUT=30
# DB_POOL_RECYCLE=3600

# 替代配置方式（任选其一）：
# 方式2: 使用 DB_ 前缀
# DB_HOST=codehubot-mysql
# DB_PORT=3306
# DB_NAME=aiot_pbl
# DB_USER=aiot_user
# DB_PASSWORD=aiot_password

# 方式3: 直接提供完整的数据库连接URL
# DATABASE_URL=mysql+pymysql://aiot_user:aiot_password@codehubot-mysql:3306/aiot_pbl

# ==================== CORS 跨域配置 ====================
# 允许的跨域来源（多个用逗号分隔，* 表示允许所有）
# 容器化部署时，需要配置实际的前端访问地址
CORS_ORIGINS=http://localhost:8082,http://127.0.0.1:8082

# ==================== 文件上传配置 ====================
# 上传文件存储路径（容器内路径）
UPLOAD_DIR=/app/uploads

# 上传文件大小限制（MB）
MAX_UPLOAD_SIZE=100

# 允许的文件类型（多个用逗号分隔）
ALLOWED_FILE_TYPES=.jpg,.jpeg,.png,.gif,.pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.zip,.rar

# ==================== 阿里云服务配置 ====================
# 阿里云访问凭证
ALIYUN_ACCESS_KEY_ID=your-aliyun-access-key-id
ALIYUN_ACCESS_KEY_SECRET=your-aliyun-access-key-secret

# 阿里云 VOD 视频点播服务配置
ALIYUN_VOD_REGION_ID=cn-beijing

# 阿里云 OSS 对象存储服务配置（如需使用）
# ALIYUN_OSS_BUCKET=your-bucket-name
# ALIYUN_OSS_ENDPOINT=oss-cn-beijing.aliyuncs.com

# ==================== 日志配置 ====================
# 日志级别（DEBUG/INFO/WARNING/ERROR/CRITICAL）
LOG_LEVEL=INFO

# 日志文件路径（容器内路径）
# LOG_FILE=/app/logs/app.log

# ==================== 其他配置 ====================
# API 文档是否启用（生产环境建议关闭）
ENABLE_DOCS=false

# 时区设置
TIMEZONE=Asia/Shanghai

# ==================== 部署说明 ====================
# 1. 复制此文件为 .env：cp .env.example .env
# 2. 修改数据库配置，确保连接到正确的 MySQL 实例
# 3. 修改 SECRET_KEY 为强随机字符串（生产环境必须）
# 4. 配置阿里云访问凭证（如需使用阿里云服务）
# 5. 根据实际情况调整 CORS_ORIGINS（生产环境必须设置准确的域名）
# 6. 根据需要调整端口配置
# 7. 运行：docker-compose up -d
